section,heading,xpath,auth_file,auth_section,auth_col,separator,format,comment
metadata,hand UID,"//tei:handNote/concat(ancestor::tei:TEI/tei:teiHeader/tei:fileDesc/tei:publicationStmt/tei:idno[@type=""msID""], ""_hand_"", count(preceding::tei:handNote) + 1)",,,,,text,"A unique identifier for the hand note, generated by concatenating the identifier given to the manuscript with which the hand is associated with a count of how many handNote elements precede the current element in the entry file."
metadata,file URL,"//tei:handNote/string-join(ancestor::tei:TEI/@xml:id, """")",,,,,text,"A unique identifier for the catalogue file, given in the xml:id attribute to the TEI root element."
metadata,collection,"//tei:handNote/string-join(ancestor::tei:TEI/tei:teiHeader/tei:fileDesc/tei:publicationStmt/tei:idno[@type=""collection""][not(@subtype=""alt"")][not(@subtype=""alt"")]/string-join(.,""""), "" "")",,,,,text,"The collection in which the manuscript is recorded, given in an idno element within the publicationStmt element which has @type ""collection"" and is not an alternative identifier (and therefore has no @subtype with ""alt"")."
metadata,ms ID,"//tei:handNote/string-join(ancestor::tei:TEI/tei:teiHeader/tei:fileDesc/tei:publicationStmt/tei:idno[@type=""msID""][not(@subtype=""alt"")]/string-join(.,""""), "" "")",,,,,text,"The identifier given to the manuscript, given in an idno element within the publicationStmt element which has @type ""msID"" and is not an alternative identifier (and therefore has no @subtype with ""alt"")."
metadata,shelfmark,"//tei:handNote/string-join(ancestor::tei:TEI/tei:teiHeader/tei:fileDesc/tei:sourceDesc/tei:msDesc/tei:msIdentifier/tei:idno[@type=""shelfmark""][not(@subtype=""alt"")]/string-join(.,""""), "" "")",,,,,text,"The shelfmark given to the manuscript, given in an idno element within the publicationStmt element which has @type ""shelfmark"" and is not an alternative identifier (and therefore has no @subtype with ""alt"")."
metadata,ms type,"//tei:handNote/string-join((ancestor::tei:msPart[not(@type=('fragment','wrapper','flyleaf'))]/('part'),ancestor::tei:msPart[@type=('fragment','wrapper','flyleaf')]/('fragment'),ancestor::tei:msDesc[not(.//tei:msPart)]/('manuscript'),ancestor::tei:msDesc[.//tei:msPart[not(@type=('fragment','wrapper','flyleaf'))]]/('manuscript-composite'),ancestor::tei:msDesc[.//tei:msPart and not(.//tei:msPart[not(@type=('fragment','wrapper','flyleaf'))])]/('manuscript-with-fragment'))[1], "" "")",,,,,text,"Whether the current row concerns a fragment ('fragment'), a manuscript part ('part'), an entire manuscript ('manuscript'), a manuscript containing parts ('manuscript-composite') or a manuscript containing fragments ('manuscript-with-fragment'). "
metadata,part name,"//tei:handNote/string-join((ancestor::tei:msPart|ancestor::tei:msDesc)[last()]//tei:idno[@type=""part""][not(@subtype=""alt"")]/string-join(.,""""), "" "")",,,,,text,"The identifier given to the manuscript or manuscript part in an idno element which has @type ""part"" and is not an alternative identifier (and therefore has no @subtype with ""alt"")."
metadata,part ID,"//tei:handNote/string-join((ancestor::tei:msPart|ancestor::tei:msDesc)[last()]/@xml:id, "" "")",,,,,text,"The identifier given to the manuscript or manuscript part in an xml:id attribute. If the current row is not for a fragment or a manuscript part, this column will be the same as the metadata: ID column."
overview,hands,"//tei:handNote/normalize-space(string-join(., """"))",,,,,text,"An overview of the current hand, as encoded within the handDesc element."
overview,total hands,"//tei:handNote/string-join(ancestor::tei:handDesc/@hands, "" "")",,,,,number,"The total number of hands contained within the manuscript or manuscript part with which this row is associated, as given in the @hands attribute to an ancestor handDesc element."
person,scribe ref,"//tei:handNote/string-join(@scribe, "" "")",,,,,text,"The identifier assigned to the hand in its containing manuscript or manuscript part, as given in the @scribe attribute to the handDesc element. These will not necessarily be unique across a single catalogue file."
person,hand ID,"//tei:handNote/string-join(@xml:id, "" "")",,,,,text,"The identifier assigned to the hand in its containing manuscript or manuscript part, as given in the @xml:id attribute to the handDesc element. These will be unique across a single catalogue file, but may not be unique across the catalogue as a whole."
person,person(s),"//tei:handNote/normalize-space(string-join(.//tei:persName[contains(@role,""scr"")], ""; ""))",,,,,text,"Details of any person(s) associated with the hand and encoded within a persName element. This is often used to identify the scribe, but may not always be."
person,person ID(s),"//tei:handNote/string-join(distinct-values(.//tei:persName[contains(@role,""scr"")]/@key), "" "")",,,,,text,"The identifier(s), corresponding to those found in the authority file, given for any person(s) associated with the hand and encoded within a persName element."
locus,scope,"//tei:handNote/string-join(@scope, "" "")",,,,,text,"The scope of the hand within the manuscript or manuscript part. Common values are 'major', 'minor', and 'sole'."
locus,n,"//tei:handNote/string-join(string(count(.//tei:locus)[.>0]),"""")",,,,,number,"An integer count of the number of locus ranges associated with this hand, calculated by counting the number of locus elements in the handDesc element."
locus,locus,"//tei:handNote/normalize-space(string-join(.//tei:locus[text()]/string-join(.,""""), ""; ""))",,,,,text,"Details of any locus information for this feature encoded within a locus element. When multiple loci are given, they are separated using a semi-colon."
locus,from,"//tei:handNote/string-join(.//tei:locus/@from, "" "")",,,,,number,"The folio, page, or membrane reference at which this feature begins, as encoded within the @from attribute to a locus element. Where multiple loci are given, they are separated by a space."
locus,to,"//tei:handNote/string-join(.//tei:locus/(@to|@from)[last()], "" "")",,,,,number,"The folio, page, or membrane reference at which this feature ends, as encoded within the @to attribute to a locus element. Where multiple loci are given, they are separated by a space."
date,date,"//tei:handNote/normalize-space(string-join(.//tei:date/string-join(.,""""), ""; ""))",,,,,date,"Details of the date associated with this feature, as encoded within a date element. This value may be given in a standardised date format, or as text."
date,when,"//tei:handNote/string-join(.//tei:date/@when, "" "")",,,,,date,"The date associated with this feature, formatted as a date, as encoded within the @when attribute of a date element."
date,not before,"//tei:handNote/string-join(.//tei:date/(@notBefore|@from|@when)[last()], "" "")",,,,,date,"The terminus post quem associated with this feature, formatted as a date, as encoded within the @notBefore attribute of a date element."
date,not after,"//tei:handNote/string-join(.//tei:date/(@notAfter|@to|@when)[last()], "" "")",,,,,date,"The terminus ante quem associated with this feature, formatted as a date, as encoded within the @notAfter attribute of a date element."
date,certainty,"//tei:handNote/string-join(distinct-values(.//tei:date/@cert), "" "")",,,,,text,"The certainty of the dating in the preceding columns, as encoded within the @cert attribute attribute of a date element. Possible values are high, medium, and low."
date,calendar,"//tei:handNote/string-join(distinct-values(.//tei:date/@calendar), "" "")",,,,,text,"The calendar used for the dating in the preceding columns, as encoded within the @calendar attribute of a date element. The most common value is Gregorian."
palaeography,script,"//tei:handNote/string-join(@script, "" "")",,,,,text,"Details of the script type assigned to the current hand, contained within the @script element to the handNote element. Common values include Anglicana, capitalsSquare, capitalsRustic, uncial, halfUncial, minusculeInsular, minusculeVernacular (for English vernacular minuscule or Anglo-Saxon minuscule), minusculeCaroline (for both English and continental variants), minuscule (for other forms e.g. Beneventan, Luxeuil, etc.), protogothic (‘praegothica’), textualisNorthern, textualisSouthern, semitextualis, cursivaAntiquior (‘anglicana’, ‘anglicana formata‘, etc.), cursiva (‘cancelleresca’, ‘bastarda’, ‘lettre batarde’, ‘secretary’), hybrida (‘semihybrida’, ‘loopless bastarda’, ‘fractura’, ‘mercantesca’), gothicoAntiqua (‘fere-humanistica’, ‘gothico-humanistica’), humanisticaTextualis, humanisticaSemitextualis, and humanisticaCursiva."
palaeography,execution,"//tei:handNote/string-join(@execution, "" "")",,,,,text,"Details of the execution of the current hand, contained within the @execution element to the handNote element. Common values include formata, libraria, and currens."
palaeography,medium,"//tei:handNote/string-join(@medium,  "" "")",,,,,text,"Details of the the tint or type of ink or other writing medium of the current hand, contained within the @medium attribute to the handNote element. Common values include ink, pencil, and colours (e.g. brown)."
palaeography,terms,"//tei:handNote/normalize-space(string-join(.//tei:term/string-join(.,""""), ""; ""))",,,,,text,"Technical terms used in the description of the hand, and encoded within a term element. Values often contain information about script types and writing media."
palaeography,desc,"//tei:handNote/normalize-space(string-join(.//tei:p[contains(@n, ""desc"")]/string-join(.,""""), ""; ""))",,,,,text,"A prose description of the features of this hand, encoded within a p element with an @n attribute containing 'desc'."
palaeography,char,"//tei:handNote/normalize-space(string-join(.//tei:p[contains(@n, ""char"")]/string-join(.,""""), ""; ""))",,,,,text,"Information given about characters of note for this hand, encoded within a p element with an @n attribute containing 'char'."
palaeography,characters,"//tei:handNote/normalize-space(string-join(distinct-values(.//tei:q[contains(@type, ""character"")][string-length() <= 2]/string-join(.,"""")), "" ""))",,,,,text,"Individual characters or character pairs, separated by a space, which are referenced in the character notes given in the preceding column."
palaeography,ligature,"//tei:handNote/normalize-space(string-join(.//tei:p[contains(@n, ""ligature"")]/string-join(.,""""), ""; ""))",,,,,text,"Information given about ligatures of note for this hand, encoded within a p element with an @n attribute containing 'ligature'."
palaeography,abbreviations,"//tei:handNote/normalize-space(string-join(.//tei:p[contains(@n, ""abbreviation"")]/string-join(.,""""), ""; ""))",,,,,text,"Information given about abbreviations of note for this hand, encoded within a p element with an @n attribute containing 'abbreviation'."
palaeography,corrections,"//tei:handNote/normalize-space(string-join(.//tei:p[contains(@n, ""correction"")]/string-join(.,""""), ""; ""))",,,,,text,"Information given about corrections of note for this hand, encoded within a p element with an @n attribute containing 'correction'."
palaeography,punctuation,"//tei:handNote/normalize-space(string-join(.//tei:p[contains(@n, ""punctuation"")]/string-join(.,""""), ""; ""))",,,,,text,"Information given about punctuation of note for this hand, encoded within a p element with an @n attribute containing 'punctuation'."
palaeography,nota,"//tei:handNote/normalize-space(string-join(.//tei:p[contains(@n, ""nota"")]/string-join(.,""""), ""; ""))",,,,,text,"Information given about punctuation of note for this hand, encoded within a p element with an @n attribute containing 'punctuation'."
palaeography,language,"//tei:handNote/normalize-space(string-join(.//tei:p[contains(@n, ""language"")]/string-join(.,""""), ""; ""))",,,,,text,"Information given about litterae notabiliores of note for this hand, encoded within a p element with an @n attribute containing 'nota'."